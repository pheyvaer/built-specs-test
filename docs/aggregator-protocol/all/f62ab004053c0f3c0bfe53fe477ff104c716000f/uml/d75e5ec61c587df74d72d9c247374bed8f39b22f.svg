<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="367px" preserveAspectRatio="none" style="width:123px;height:367px;background:#FFFFFF;" version="1.1" viewBox="0 0 123 367" width="123px" zoomAndPan="magnify"><defs/><g><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="A" id="part1-lifeline"><g><title>Aggregator Service ..</title><rect fill="#000000" fill-opacity="0.00000" height="308" width="8" x="8" y="30"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="12" x2="12" y1="30" y2="338"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="AAS" id="part2-lifeline"><g><title>Aggregator Authorization Server ..</title><rect fill="#000000" fill-opacity="0.00000" height="308" width="8" x="32" y="30"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="36" x2="36" y1="30" y2="338"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="URS" id="part3-lifeline"><g><title>Upstream Resource Server .</title><rect fill="#000000" fill-opacity="0.00000" height="308" width="8" x="56" y="30"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="60" x2="60" y1="30" y2="338"/></g></g><g class="participant-lifeline" data-entity-uid="part4" data-qualified-name="UAS" id="part4-lifeline"><g><title>Upstream Authorization Server ..</title><rect fill="#000000" fill-opacity="0.00000" height="308" width="8" x="80" y="30"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="84" x2="84" y1="30" y2="338"/></g></g><g class="participant-lifeline" data-entity-uid="part5" data-qualified-name="IdP" id="part5-lifeline"><g><title>Identity Provider .</title><rect fill="#000000" fill-opacity="0.00000" height="308" width="8" x="104" y="30"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="108" x2="108" y1="30" y2="338"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="A" id="part1-head"><rect fill="#E2E2F0" height="24" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="14" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="12" y="12">Aggregator Service &#9881;&#65039;</text></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="A" id="part1-tail"><rect fill="#E2E2F0" height="24" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="14" x="5" y="337"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="12" y="344">Aggregator Service &#9881;&#65039;</text></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="AAS" id="part2-head"><rect fill="#E2E2F0" height="24" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="14" x="29" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="36" y="12">Aggregator Authorization Server &#128737;&#65039;</text></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="AAS" id="part2-tail"><rect fill="#E2E2F0" height="24" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="14" x="29" y="337"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="36" y="344">Aggregator Authorization Server &#128737;&#65039;</text></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="URS" id="part3-head"><rect fill="#E2E2F0" height="24" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="14" x="53" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="60" y="12">Upstream Resource Server &#128230;</text></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="URS" id="part3-tail"><rect fill="#E2E2F0" height="24" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="14" x="53" y="337"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="60" y="344">Upstream Resource Server &#128230;</text></g><g class="participant participant-head" data-entity-uid="part4" data-qualified-name="UAS" id="part4-head"><rect fill="#E2E2F0" height="24" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="14" x="77" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="84" y="12">Upstream Authorization Server &#128737;&#65039;</text></g><g class="participant participant-tail" data-entity-uid="part4" data-qualified-name="UAS" id="part4-tail"><rect fill="#E2E2F0" height="24" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="14" x="77" y="337"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="84" y="344">Upstream Authorization Server &#128737;&#65039;</text></g><g class="participant participant-head" data-entity-uid="part5" data-qualified-name="IdP" id="part5-head"><rect fill="#E2E2F0" height="24" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="14" x="101" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="108" y="12">Identity Provider &#128272;</text></g><g class="participant participant-tail" data-entity-uid="part5" data-qualified-name="IdP" id="part5-tail"><rect fill="#E2E2F0" height="24" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="14" x="101" y="337"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="108" y="344">Identity Provider &#128272;</text></g><g class="message" data-entity-1="part1" data-entity-2="part3" id="msg1"><polygon fill="#181818" points="48,52,58,56,48,60,52,56" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="12" x2="54" y1="56" y2="56"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="19" y="44">1. Request resource (no access token)</text></g><g class="message" data-entity-1="part3" data-entity-2="part4" id="msg2"><polygon fill="#181818" points="72,76,82,80,72,84,76,80" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="60" x2="78" y1="80" y2="80"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="67" y="68">1.1 Request UMA ticket for resource</text></g><g class="message" data-entity-1="part4" data-entity-2="part3" id="msg3"><polygon fill="#181818" points="71,100,61,104,71,108,67,104" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="65" x2="83" y1="104" y2="104"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="77" y="92">1.2 Return UMA ticket</text></g><g class="message" data-entity-1="part3" data-entity-2="part1" id="msg4"><polygon fill="#181818" points="23,124,13,128,23,132,19,128" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="17" x2="59" y1="128" y2="128"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="29" y="116">1.3 401 Unauthorized + UMA ticket</text></g><g class="message" data-entity-1="part1" data-entity-2="part4" id="msg5"><polygon fill="#181818" points="72,148,82,152,72,156,76,152" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="12" x2="78" y1="152" y2="152"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="19" y="140">2. Request access token</text></g><g class="message" data-entity-1="part4" data-entity-2="part5" id="msg6"><polygon fill="#181818" points="96,172,106,176,96,180,100,176" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="84" x2="102" y1="176" y2="176"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="91" y="164">2.1 Validate ID token</text></g><g class="message" data-entity-1="part5" data-entity-2="part4" id="msg7"><polygon fill="#181818" points="95,196,85,200,95,204,91,200" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="89" x2="107" y1="200" y2="200"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="101" y="188">2.2 Validation result (success)</text></g><g class="message" data-entity-1="part4" data-entity-2="part1" id="msg8"><polygon fill="#181818" points="23,220,13,224,23,228,19,224" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="17" x2="83" y1="224" y2="224"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="29" y="212">2.3 Access token + derivation_resource_id</text></g><g class="message" data-entity-1="part1" data-entity-2="part3" id="msg9"><polygon fill="#181818" points="48,244,58,248,48,252,52,248" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="12" x2="54" y1="248" y2="248"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="19" y="236">3. Request resource with access token</text></g><g class="message" data-entity-1="part3" data-entity-2="part1" id="msg10"><polygon fill="#181818" points="23,268,13,272,23,276,19,272" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="17" x2="59" y1="272" y2="272"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="29" y="260">3.1 Protected resource</text></g><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg11"><polygon fill="#181818" points="24,292,34,296,24,300,28,296" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="12" x2="30" y1="296" y2="296"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="19" y="284">4. Update resource registration</text></g><g class="message" data-entity-1="part2" data-entity-2="part1" id="msg12"><polygon fill="#181818" points="23,316,13,320,23,324,19,320" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="17" x2="35" y1="320" y2="320"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="29" y="308">4.1 Registration updated</text></g><!--SRC=[XP8nJiD044LxdsAKAX4Ymd4gYaWhqQH0YXAPDbhPWxEAMPlrE2XS0YHeW0BHS0REmmNW2Cok7Tj4H3JRxF_pt_pTOgrqBesy0Zv9HIgNcXQqJH4CHYHragBdTUwW9vB4O28fCx10ir4HmkVpqzV7NGza0UAWM9IqoeowbQGoxQneuFlrvQsnYiLlSvWNP93PvbXafU6WnlNmxYpX_93btxHmFsqQeoP5MvYPRADY9t-yTzffFFCy0SSJ6tWA_f29haiiY4kgoVew0nb5M1H0sHhrm6EfSmZdy1jBU2w0KzT8SCcrx2PuB8JZDcB41YgDxkYhaImHLX30-CI7KCjwKupXg2kkWMtyg0NkCbQH4xkUrVXm8LCLIqAOdjKAlggWgZ6ZdSIMokHbIj0lIZTpq6mWh3G0qObYD6vKRPnpkTjvgU9khy4VlTueMkr1joK4pColHVnJUVkcoMgaiCZZ8OIvMwcPoFzHyITn99veaSVkZTexA9qn_W40]--></g></svg>