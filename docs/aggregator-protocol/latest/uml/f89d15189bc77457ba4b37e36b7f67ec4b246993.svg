<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="447px" preserveAspectRatio="none" style="width:738px;height:447px;background:#FFFFFF;" version="1.1" viewBox="0 0 738 447" width="738px" zoomAndPan="magnify"><defs/><g><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="Client" id="part1-lifeline"><g><title>Client ...</title><rect fill="#000000" fill-opacity="0.00000" height="375.5938" width="8" x="38.8916" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="42" x2="42" y1="36.2969" y2="411.8906"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="User" id="part2-lifeline"><g><title>User .</title><rect fill="#000000" fill-opacity="0.00000" height="375.5938" width="8" x="116.1641" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="119.7832" x2="119.7832" y1="36.2969" y2="411.8906"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="Aggregator" id="part3-lifeline"><g><title>Aggregator Server .</title><rect fill="#000000" fill-opacity="0.00000" height="375.5938" width="8" x="340.2271" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="344.123" x2="344.123" y1="36.2969" y2="411.8906"/></g></g><g class="participant-lifeline" data-entity-uid="part4" data-qualified-name="WebID" id="part4-lifeline"><g><title>User WebID .</title><rect fill="#000000" fill-opacity="0.00000" height="375.5938" width="8" x="516.7676" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="520.0356" x2="520.0356" y1="36.2969" y2="411.8906"/></g></g><g class="participant-lifeline" data-entity-uid="part5" data-qualified-name="AppClientDoc" id="part5-lifeline"><g><title>Client ID .</title><rect fill="#000000" fill-opacity="0.00000" height="375.5938" width="8" x="624.8701" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="628.4995" x2="628.4995" y1="36.2969" y2="411.8906"/></g></g><g class="participant-lifeline" data-entity-uid="part6" data-qualified-name="IDP" id="part6-lifeline"><g><title>IDP .</title><rect fill="#000000" fill-opacity="0.00000" height="375.5938" width="8" x="703.3423" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="707.2407" x2="707.2407" y1="36.2969" y2="411.8906"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="Client" id="part1-head"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75.7832" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.7832" x="12" y="24.9951">Client &#129489;&#8205;&#128187;</text></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="Client" id="part1-tail"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75.7832" x="5" y="410.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.7832" x="12" y="430.8857">Client &#129489;&#8205;&#128187;</text></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="User" id="part2-head"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="58.7617" x="90.7832" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44.7617" x="97.7832" y="24.9951">User &#128587;</text></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="User" id="part2-tail"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="58.7617" x="90.7832" y="410.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44.7617" x="97.7832" y="430.8857">User &#128587;</text></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="Aggregator" id="part3-head"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="156.208" x="266.123" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142.208" x="273.123" y="24.9951">Aggregator Server &#129302;</text></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="Aggregator" id="part3-tail"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="156.208" x="266.123" y="410.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142.208" x="273.123" y="430.8857">Aggregator Server &#129302;</text></g><g class="participant participant-head" data-entity-uid="part4" data-qualified-name="WebID" id="part4-head"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109.4639" x="466.0356" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95.4639" x="473.0356" y="24.9951">User WebID &#128196;</text></g><g class="participant participant-tail" data-entity-uid="part4" data-qualified-name="WebID" id="part4-tail"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109.4639" x="466.0356" y="410.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95.4639" x="473.0356" y="430.8857">User WebID &#128196;</text></g><g class="participant participant-head" data-entity-uid="part5" data-qualified-name="AppClientDoc" id="part5-head"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86.7412" x="585.4995" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.7412" x="592.4995" y="24.9951">Client ID &#128196;</text></g><g class="participant participant-tail" data-entity-uid="part5" data-qualified-name="AppClientDoc" id="part5-tail"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86.7412" x="585.4995" y="410.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.7412" x="592.4995" y="430.8857">Client ID &#128196;</text></g><g class="participant participant-head" data-entity-uid="part6" data-qualified-name="IDP" id="part6-head"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="50.2031" x="682.2407" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.2031" x="689.2407" y="24.9951">IDP &#128272;</text></g><g class="participant participant-tail" data-entity-uid="part6" data-qualified-name="IDP" id="part6-tail"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="50.2031" x="682.2407" y="410.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.2031" x="689.2407" y="430.8857">IDP &#128272;</text></g><g class="message" data-entity-1="part1" data-entity-2="part3" id="msg1"><polygon fill="#181818" points="332.2271,63.4297,342.2271,67.4297,332.2271,71.4297,336.2271,67.4297" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="42.8916" x2="338.2271" y1="67.4297" y2="67.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182.3428" x="49.8916" y="62.3638">1. Start aggregator creation</text></g><g class="message" data-entity-1="part3" data-entity-2="part4" id="msg2"><polygon fill="#181818" points="355.2271,92.5625,345.2271,96.5625,355.2271,100.5625,351.2271,96.5625" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="508.7676,92.5625,518.7676,96.5625,508.7676,100.5625,512.7676,96.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="349.2271" x2="514.7676" y1="96.5625" y2="96.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.5405" x="361.2271" y="91.4966">1.1 Dereference WebID</text></g><g class="message" data-entity-1="part3" data-entity-2="part1" id="msg3"><polygon fill="#181818" points="53.8916,121.6953,43.8916,125.6953,53.8916,129.6953,49.8916,125.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="47.8916" x2="343.2271" y1="125.6953" y2="125.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="277.3354" x="59.8916" y="120.6294">1.2 Return client_id, code_challenge, state</text></g><g class="message" data-entity-1="part1" data-entity-2="part6" id="msg4"><polygon fill="#181818" points="695.3423,150.8281,705.3423,154.8281,695.3423,158.8281,699.3423,154.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="42.8916" x2="701.3423" y1="154.8281" y2="154.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149.8174" x="49.8916" y="149.7622">2. Redirect to IDP login</text></g><g class="message" data-entity-1="part6" data-entity-2="part2" id="msg5"><polygon fill="#181818" points="131.1641,179.9609,121.1641,183.9609,131.1641,187.9609,127.1641,183.9609" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="695.3423,179.9609,705.3423,183.9609,695.3423,187.9609,699.3423,183.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="125.1641" x2="701.3423" y1="183.9609" y2="183.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184.3296" x="137.1641" y="178.895">3. Authenticate and consent</text></g><g class="message" data-entity-1="part6" data-entity-2="part1" id="msg6"><polygon fill="#181818" points="53.8916,209.0938,43.8916,213.0938,53.8916,217.0938,49.8916,213.0938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="47.8916" x2="706.3423" y1="213.0938" y2="213.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190.3027" x="59.8916" y="208.0278">4. Redirect with code + state</text></g><g class="message" data-entity-1="part1" data-entity-2="part3" id="msg7"><polygon fill="#181818" points="332.2271,238.2266,342.2271,242.2266,332.2271,246.2266,336.2271,242.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="42.8916" x2="338.2271" y1="242.2266" y2="242.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241.7061" x="49.8916" y="237.1606">5. Return code + redirect_uri + state</text></g><g class="message" data-entity-1="part3" data-entity-2="part5" id="msg8"><polygon fill="#181818" points="355.2271,267.3594,345.2271,271.3594,355.2271,275.3594,351.2271,271.3594" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="616.8701,267.3594,626.8701,271.3594,616.8701,275.3594,620.8701,271.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="349.2271" x2="622.8701" y1="271.3594" y2="271.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234.9268" x="361.2271" y="266.2935">5.1 Dereference Client ID document</text></g><path d="M266,284.3594 L266,309.3594 L421,309.3594 L421,294.3594 L411,284.3594 L266,284.3594" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M411,284.3594 L411,294.3594 L421,294.3594 L411,284.3594" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.9512" x="272" y="301.4263">validate redirect_uri.</text><g class="message" data-entity-1="part3" data-entity-2="part6" id="msg9"><polygon fill="#181818" points="695.3423,331.625,705.3423,335.625,695.3423,339.625,699.3423,335.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="344.2271" x2="701.3423" y1="335.625" y2="335.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.2324" x="351.2271" y="330.5591">5.2 Redeem code</text></g><g class="message" data-entity-1="part6" data-entity-2="part3" id="msg10"><polygon fill="#181818" points="355.2271,360.7578,345.2271,364.7578,355.2271,368.7578,351.2271,364.7578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="349.2271" x2="706.3423" y1="364.7578" y2="364.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="252.6748" x="361.2271" y="359.6919">IDP_aggregator_token + refresh_token</text></g><g class="message" data-entity-1="part3" data-entity-2="part1" id="msg11"><polygon fill="#181818" points="53.8916,389.8906,43.8916,393.8906,53.8916,397.8906,49.8916,393.8906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="47.8916" x2="343.2271" y1="393.8906" y2="393.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248.6821" x="59.8916" y="388.8247">5.3 Return aggregator account details</text></g><!--SRC=[TLAzJiCm4Dxp5AUkj97QqgL2I1LPkY4gn1WPvvfOJUt8SOhO6DWG4dz2Okg2n4FmDZn17u6p4ne7n137Fd_VtNVVkLm9MJ3Dra2h4LmKJ9g5kSuHD7B3P9fZ47XtS98Bf1yheTTiTzkFnw-R-ztswRFNWPwNg1tGRNRRjxlkVM-MfXfJPfI61UgD0xs_zYodlUfINAeBl9n7X7s-TLXtxC8QQJvgLXHrD5Ay2vv7fmHxUN0mEWH1GnySUpgcC0nXOOW8hDNDDJ8Zb0oyNew8vpHPoX0YrBYaJt9if7hO0M7hQXOyWZCqbPR0NIWMIH-uIZ3c6Sjpb2dseJJCe2-H54zX518r4NPeO9IDGQvI8GExiuAiSLCOXp2hJ4PCmIaDC9bG0LbIm25zEOTUoYjXCgS43luAy3sQXFiMQhHkKiIL5dloBxFyqTWKNS_QMIQALsihLIhIhko3yMjlM2uIsvLVC-outRWrSKudY6idSz-wdurYSJlesAWLIjVFKcEPrUVWlr5Eml6F3zvZOPohYbf9q32Hbzy0]--></g></svg>